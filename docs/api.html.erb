<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

   <link rel="stylesheet" type="text/css" href="https://unpkg.com/bootswatch@5.2.2/dist/darkly/bootstrap.min.css">

  <title>ConedaKOR API Documentation</title>
</head>
<body>
  <div class="container mb-5">
    <%= intro %>

    <% data['scopes'].each do |scope| %>
      <h3 class="mt-5"><%= scope['description'].capitalize %></h3>
      <hr />

      <div><strong>Authentication</strong>: <%= scope['authentication'] %></div>

      <% scope['endpoints'].each do |endpoint| %>
        <h4 class="mt-5 mb-3">
          <%= (endpoint['method'] || 'get').upcase %>
          <code><%= scope['path'] %><%= endpoint['path'] %></code>

          <div class="fs-6"><%= endpoint['description'].capitalize %></div>
        </h4>

        <% if endpoint['params'] %>
          <div>
            Parameters:

            <ul class="list-unstyled ms-4 mb-0">
              <% endpoint['params'].each do |param| %>
                <li>
                  <strong><%= param['name'] %></strong>
                  [<%= param['type'] %>]
                  <%= param['description'] %>
                  <% if param['values'].is_a? Array %>
                    <div class="ms-4">
                      possible values:

                      <ul class="list-unstyled">
                        <% param['values'].each do |v| %>
                          <li><%= v %></li>
                        <% end %>
                      </ul>
                    </div>
                  <% end %>
                  <% if param['values'].is_a? Hash %>
                    <div class="ms-4">
                      sub-values:

                      <ul class="list-unstyled">
                        <% param['values'].each do |k, v| %>
                          <li><strong><%= k %></strong>: <%= v %></li>
                        <% end %>
                      </ul>
                    </div>
                  <% end %>
                </li>
              <% end %>
            </ul>
          </div>
        <% end %>
        <div>
          Result: <%=
            endpoint['result'] ||
            'a confirmation message or a object detailing any errors'
          %>
        </div>

      <% end %>
    <% end %>
  </div>
</body>
</html>

